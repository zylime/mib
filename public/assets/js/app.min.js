"use strict";$.fn.Calender=function(t){var s=$(this).find(".js-calendar-container");!function(){for(var t=0;t<12;t++){var e=new Date,i=".js-calendar-"+(t+1);e.setDate(1),e.setMonth(e.getMonth()-6+t),s.append('<div class="c-calendar--block js-calendar js-calendar-'+(t+1)+'" data-time="'+e+'"></div>'),$(i).calendar({date:e,daysMin:["日","一","二","三","四","五","六"]})}s.append('<input type="hidden" name="selectDate" class="js-calendar-select-date">')}()},$.fn.Carousel=function(t){$(this).slick({infinite:!0,arrows:!1,dots:!1})},$.fn.Collapse=function(t){var n,a,o=$.extend({text:!1},t),c=$(this).find(".js-collapse-container"),e=$(this).find(".js-collapse-content"),d=$(this).find(".js-collapse-btn");o.text&&(n="阅读更多",a="收起");var r=c.height();!function(){var i,s=e.height();r<s&&(d.attr("data-expanded",!1).removeClass("hide"),o.text&&d.find("span").html(n),i=s);d.on("click",function(){var t="true"==$(this).attr("data-expanded")?"false":"true";if(c.animate({height:i+"px"}),d.attr("data-expanded",t),i=i==r?s:r,o.text){var e=$(this).find("span").html()==n?a:n;d.find("span").html(e)}})}()},$(document).ready(function(){$(document).Popups(),$("[data-js-sign-in]").SignIn(),$("[data-js-register]").Register(),$("[data-js-order-detail]").OrderDetail(),$("[data-js-prepay]").PrePay(),$("[data-js-payment-method]").PaymentMethod(),$("[data-js-home]").Home(),$("[data-js-project-list]").ProjectList(),$("[data-js-carousel]").Carousel(),$("[data-js-store-comments]").StoreComments(),$("[data-js-password]").TogglePsw(),$("[data-js-calendar]").Calender(),$("[data-js-forget-psw]").forgetPsw(),$("[data-js-reset-psw]").resetPsw(),$("[data-js-collapse]").Collapse({text:!0}),$("[data-js-search]").Search(),lightbox.option({resizeDuration:200,wrapAround:!0})}),$.fn.forgetPsw=function(t){$(this);var e=$(this).find(".js-code"),i=$(this).find(".js-submit"),s=$(this).find(".js-forget-psw-form");e.on("click touch",function(){if(!$(this).hasClass("disabled")){var t=60,e=this;$(this).addClass("disabled");var i=setInterval(function(){t-=1,$(e).html("重新发送 ("+t+")"),0==t&&(clearInterval(i),$(e).html("发送验证码"),$(e).removeClass("disabled"))},1e3)}}),i.on("click touch",function(){var t=s.serialize();$.ajax({type:"POST",dataType:"text",url:"",data:t,success:function(t){}})})},$.fn.Home=function(t){$(this).find(".js-categories-slider").slick({dots:!1,infinite:!1,slidesToShow:4,arrows:!1})},$.fn.OrderDetail=function(t){var e=$(this).find(".js-order-detail-checkbox"),i=$(this).find(".js-user-info p"),s=$(this).find('.js-user-info input[name="userName"]'),n=$(this).find('.js-user-info input[name="userId"]'),a=$(this).find(".js-user-info .js-btn");function o(){var t=s.val()+" "+n.val();i.html(t)}e.on("click touch",function(){var t=""==$(this).attr("data-value")?"checked":"";$(this).toggleClass("active"),$(this).attr("data-value",t),$(this).next().val(t)}),a.html(),o(),a.on("click touch",function(){s.toggle(),n.toggle(),i.toggle(),o()}),0<$(".js-datepicker").length&&$(".js-datepicker").dateRangePicker({language:"cn"})},$.fn.PaymentMethod=function(t){$(this);var e=$(this).find(".js-checkbox");e.each(function(){$(this).on("click touch",function(){e.each(function(){$(this).attr("data-checked","").removeClass("active"),$(this).prev().val("")}),$(this).addClass("active"),$(this).attr("data-checked","checked"),$(this).prev().val("checked")})})},$.fn.Popups=function(t){$(this);function e(t){(t=t).hide(),$(".js-popup-cover").hide()}$(document).on("click touch",".js-open-popup-code",function(t){t.stopPropagation(),$(".js-popup-code").show(),$(".js-popup-cover").show()}),$(document).on("click touch",".js-popup-cover, .js-close-popup-code",function(t){t.stopPropagation(),e($(".js-popup-code"))}),$(".js-popup-code-verification-btn").on("click touch",function(){if(!$(this).hasClass("disabled")){var t=60,e=this;$(this).addClass("disabled");var i=setInterval(function(){t-=1,$(e).html("重新发送 ("+t+")"),0==t&&(clearInterval(i),$(e).html("发送验证码"),$(e).removeClass("disabled"))},1e3)}}),$(".js-popup-code").find("input").each(function(t){var e=t;$(this).on("keydown",function(){1==$(this).val().length&&0<$($(".js-popup-code").find("input")[e+1]).length&&$($(".js-popup-code").find("input")[e+1]).focus()}),$(this).on("input",function(){!function(){for(var t=$(".js-popup-code").find("input").length,e=0;e<t&&0!=$($(".js-popup-code").find("input")[e]).val().length;e++)e==t-1&&($(".js-popup-code").find(".js-btn").removeClass("disabled"),$(".js-popup-code-submit").on("click touch",function(){if(!$(this).hasClass("disabled")){var t="";$(".js-popup-code-inputs input").each(function(){t+=$(this).val()}),$.ajax({type:"POST",dataType:"text",url:"",data:t,success:function(t){}})}}))}()})}),$(document).on("click touch",".js-popup-cover, .js-close-register",function(t){t.stopPropagation(),e($(".js-popup-register"))}),$(document).on("click touch",".js-popup-cover",function(t){t.stopPropagation(),e($(".js-popup-reset-psw"))})},$.fn.PrePay=function(t){$(this);var e,i=$(this).find(".js-checkbox"),s=$(this).find(".js-price"),n=$(this).find(".js-total"),a="¥";i.on("click touch",function(){var t=""==$(this).attr("data-checked")?"checked":"";$(this).toggleClass("active"),$(this).attr("data-checked",t),$(this).prev().val(t)}),e=0,s.each(function(){var t=parseInt($(this).attr("data-price"));e+=t}),e=Number(e).toFixed(2),n.attr("data-price",e).html(a+e)},$.fn.ProjectList=function(t){var e=$(this).find(".js-categories-slider"),i=$(this).find(".js-favorite");e.slick({dots:!1,infinite:!1,slidesToShow:3,arrows:!1}),i.each(function(){$(this).on("click touch",function(t){t.preventDefault(),t.stopPropagation(),$(this).toggleClass("active")})})},$.fn.Register=function(t){$(this);var i,s=$(this).find(".js-checkbox"),n=$(this).find(".js-register-form"),a=$(this).find(".js-register-btn"),o=$(".js-popup-verify-email"),e=o.find(".js-verify-btn"),c=o.find(".js-resend-btn"),d=($(".js-popup-code"),$(".js-popup-register"));function r(){l(o),$(document).on("click touch",".js-popup-cover, .js-close-verify-email",function(t){t.stopPropagation(),h(o)})}function l(t){(t=t).show(),$(".js-popup-cover").show(),u(),c.on("click touch",function(t){t.preventDefault(),$(this).hasClass("disabled")||u()}),e.on("click touch",function(t){t.preventDefault(),p();var e=o.serialize();e=e+"&"+s.find("input").attr("name")+"="+s.find("input").val(),$.ajax({type:"POST",dataType:"text",url:"",data:e,success:function(t){p()}})})}function h(t){(t=t).hide(),$(".js-popup-cover").hide()}function u(){var t=60;c.addClass("disabled");var e=setInterval(function(){t-=1,c.html("重新发送 ("+t+")"),0==t&&(clearInterval(e),c.html("发送验证码"),c.removeClass("disabled"))},1e3)}function p(){h(o),l(d)}s.on("click touch",function(){var t=$(this).hasClass("checked")?"true":"false";$(this).toggleClass("checked"),$(this).find("input").val(t)}),i=!1,n.find("input").on("keydown",function(){for(var t=n.find("input").length,e=0;e<t;e++){if(""==$(n.find("input")[e]).val()){i=!1;break}i=!0}i&&a.removeClass("disabled")}),a.on("click touch",function(t){if(t.stopPropagation(),!$(this).hasClass("disabled")){r();var e=n.serialize();$.ajax({type:"POST",dataType:"text",url:"",data:e,success:function(t){r()}})}})},$.fn.resetPsw=function(t){$(this);var e=$(this).find(".js-submit"),n=$(this).find(".js-reset-psw-form"),a=$(this).find(".js-input-psw1"),o=$(this).find(".js-input-psw2"),c=$(this).find(".js-warning");e.on("click",function(t){t.preventDefault();var e=a.val(),i=o.val();if(""==e||""==i)c.html("请输入密码"),c.show();else if(e!==i)c.html("密码不匹配"),c.show();else{c.hide();var s=n.serialize();console.log(s),$.ajax({type:"POST",dataType:"text",url:"",data:s,success:function(t){}})}})},$.fn.Search=function(t){var e,i,s,n,a=$(this).find(".js-clear-btn"),o=$(this).find(".js-result-container"),c=$(this).find(".js-history-view-more");a.on("click touch",function(t){o.html(""),c.addClass("hide"),$(".js-history-view-more").attr("data-expanded","false").html("更多")}),156<(n=$(".js-history-list").height())&&(i="更多",$(".js-history-view-more").html(i),$(".js-history-view-more").removeClass("hide"),e=n),$(".js-history-view-more").on("click",function(){s="true"==$(this).attr("data-expanded")?"false":"true",$(".js-history-box").animate({height:e+"px"}),$(this).attr("data-expanded",s),e=156==e?n:156,i="更多"==i?"收起":"更多",$(".js-history-view-more").html(i)})},$.fn.SignIn=function(t){$(this);var i=$(this).find(".js-sign-in-form"),e=$(this).find(".js-dropdown-body"),s=$(this).find(".js-dropdown-body .js-remove"),n=$(this).find(".js-dropdown-btn"),a=$(this).find(".js-sign-in-submit");n.on("click touch",function(){0==!e.find("li").length&&e.slideToggle()}),$(document).on("click touch",function(t){t.stopPropagation(),$(t.target).parents(".c-sign-in--form").length<=0&&e.slideUp()}),s.each(function(){$(this).on("click touch",function(t){$(this).parents("li").remove(),0==e.find("li").length&&e.slideToggle()})}),e.find("span").on("click touch",function(){var t=$(this).html();e.siblings("input").val(t)}),a.on("click touch",function(t){t.preventDefault();var e=i.serialize();$.ajax({type:"GET",dataType:"json",url:"./json/signin.json",data:e,success:function(t){100==t.code?(console.log(t.message),window.location.href="./index.html"):console.log(t.message)},error:function(t){console.log(t)}})})},$.fn.StoreComments=function(t){$(this).find(".js-comments-body")},$.fn.TogglePsw=function(t){var e=$(this).find(".js-psw-input"),i=$(this).find(".js-psw-eye");i.on("click touch",function(){var t="password"==e.attr("type")?"text":"password";i.toggleClass("close"),e.attr("type",t)})};