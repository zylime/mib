"use strict";$.fn.AddFriends2=function(e){$(this);var t=$(this).find(".js-submit"),i=$(this).find(".js-checkbox"),n=($(this).find(".js-form"),$(".js-popup-add-friends"));i.on("click touch",function(){var e;"all"===$(this).attr("data-name")?$(this).hasClass("active")?i.each(function(){$(this).removeClass("active"),$(this).find("input").val("")}):i.each(function(){$(this).addClass("active"),$(this).find("input").val("selected")}):($(this).toggleClass("active"),e=$(this).hasClass("active")?"selected":"",$(this).find("input").val(e)),i.hasClass("active")?t.removeClass("disabled"):t.addClass("disabled")}),t.on("click touch",function(){$(this).hasClass("disabled")||(n.show(),$(".js-popup-cover").show())}),$(document).on("click touch",".js-popup-cover, .js-close-add-friends",function(e){e.stopPropagation(),n.hide(),$(".js-popup-cover").hide()})},$.fn.AddMedia=function(e){var a=$(this),o=a.find(".js-media").html(),r=6;!function s(){a.find('.js-media input[type="file"]').removeAttr("capture"),a.find('.js-media input[type="file"]').on("change",function(){var e=this.files[0],t=this,i=new FileReader,n=$(this).parent().hasClass("uploaded");i.readAsDataURL(e),i.onload=function(){n||a.find('.js-media input[type="file"]').length<r&&(a.find(".js-media").append(o),s()),$(t).parent().addClass("uploaded"),$(t).parent().find(".media-img").remove(),$(t).parent().append('<img class="media-img" src="'+this.result+'" alt="" />')}})}()},$.fn.Calender=function(e){var n=$(this).find(".js-calendar-container");!function(){for(var e=0;e<12;e++){var t=new Date,i=".js-calendar-"+(e+1);t.setDate(1),t.setMonth(t.getMonth()-6+e),n.append('<div class="c-calendar--block js-calendar js-calendar-'+(e+1)+'" data-time="'+t+'"></div>'),$(i).calendar({date:t,daysMin:["日","一","二","三","四","五","六"]})}n.append('<input type="hidden" name="selectDate" class="js-calendar-select-date">')}()},$.fn.Carousel=function(e){$(this).slick({infinite:!0,arrows:!1,dots:!1})},$.fn.Chat=function(e){var t=$(this),i=t.find(".js-insert-btn"),n=t.find(".js-input-popup");i.on("click touch",function(){var e=$(this).attr("data-open");$(this).hasClass("active")?(n.removeClass("active"),i.removeClass("active")):(i.removeClass("active"),$(this).addClass("active"),n.removeClass("active"),$('.js-input-popup[data-popup="'+e+'"]').addClass("active"))})},$.fn.Checkbox=function(e){$(this).find(".js-checkbox").on("click touch",function(){var e;$(this).toggleClass("active"),e=$(this).hasClass("active")?"selected":"",$(this).find("input").val(e)})},$.fn.Collapse=function(e){var s,a,o=$.extend({text:!1},e),r=$(this).find(".js-collapse-container"),t=$(this).find(".js-collapse-content"),c=$(this).find(".js-collapse-btn");o.text&&(s="阅读更多",a="收起");var d=r.height();!function(){var i,n=t.height();d<n&&(c.attr("data-expanded",!1).removeClass("hide"),o.text&&c.find("span").html(s),i=n);c.on("click",function(){var e="true"==$(this).attr("data-expanded")?"false":"true";if(r.animate({height:i+"px"}),c.attr("data-expanded",e),i=i==d?n:d,o.text){var t=$(this).find("span").html()==s?a:s;c.find("span").html(t)}})}()},$.fn.DeleteFriends=function(e){var n=$(this),s=$(this).find(".js-submit"),a=$(this).find(".js-checkbox"),o=$(this).find(".js-delete-group");a.on("click touch",function(){var e,t,i;$(this).toggleClass("active"),e=$(this).hasClass("active")?"selected":"",$(this).find("input").val(e),t=0,a.each(function(){$(this).hasClass("active")&&(t+=1)}),s.html("完成 ("+t+")"),i="",a.each(function(){if($(this).hasClass("active")){var e=$(this).attr("data-img"),t=$(this).attr("data-name");i+='<li class="txt--c"><img class="l-w--100p has-corner--50p" src="'+e+'" alt="'+t+'"/></li>',n.find(".js-delete-group ul").html(i)}}),0<n.find(".js-checkbox.active").length?o.show():(n.find(".js-delete-group ul").html(""),o.hide())}),s.on("click touch",function(){})},$(document).ready(function(){$(document).Popups(),$("[data-js-sign-in]").SignIn(),$("[data-js-sign-in-by-mobile]").SignInByMobile(),$("[data-js-sign-in-by-mobile]").MobileVerification(),$("[data-js-register]").Register(),$("[data-js-order-detail]").OrderDetail(),$("[data-js-prepay]").PrePay(),$("[data-js-payment-method]").PaymentMethod(),$("[data-js-home]").Home(),$("[data-js-project-list]").ProjectList(),$("[data-js-carousel]").Carousel(),$("[data-js-store-comments]").StoreComments(),$("[data-js-password]").TogglePsw(),$("[data-js-calendar]").Calender(),$("[data-js-forget-psw]").forgetPsw(),$("[data-js-add-friends-2]").AddFriends2(),$("[data-js-switch-control]").SwitchControl(),$("[data-js-select-friends]").SelectFriends(),$("[data-js-delete-friends]").DeleteFriends(),$("[data-js-group-members]").GroupMembers(),$("[data-js-group-owner]").GroupOwner(),$("[data-js-setting-user]").SettingUser(),$("[data-js-publish]").Publish(),$("[data-js-product-info]").ProductInfo(),$("[data-js-chat]").Chat(),$("[data-js-select-and-count]").SelectAndCount(),$("[data-js-location]").SelectLocation(),$("[data-js-selected]").Selected(),$("[data-js-more-menu]").MoreMenu(),$("[data-js-favorite]").Favorite(),$("[data-js-add-media]").AddMedia(),$("[data-js-checkbox]").Checkbox(),$("[data-js-radio-box]").RadioBox(),$("[data-js-tab-panel]").TabPanel(),$("[data-js-collapse]").Collapse({text:!0}),$("[data-js-search]").Search(),lightbox.option({resizeDuration:200,wrapAround:!0})}),$.fn.Favorite=function(e){$(this).find(".js-fav").on("click",function(){$(this).toggleClass("active"),$(this).find(".ic--fav").toggleClass("active")})},$.fn.forgetPsw=function(e){var i,n=$(this),s=$(this).find(".js-code"),a=$(this).find(".js-submit"),o=$(this).find(".js-forget-psw-form"),r=$(this).find(".js-error"),c=$(".js-popup-reset-psw");s.on("click touch",function(e){if(!$(this).hasClass("disabled"))if(""!==o.find('input[name="uid"]').val()){o.serializeJson();var t="http://mib.zengpan.org:8000/forget-psw?",i=o.serializeJson();i.uid=o.find('input[name="uid"]').val(),i._response={status:203,message:"有效用户名"},i.btn="getCAPTCHA",i=JSON.stringify(i),t+=i;var n=new XMLHttpRequest;n.open("GET",encodeURI(t),!0),n.onerror=n.onabort=n.ontimeout=function(e){console.log(e)},n.send(),n.onreadystatechange=function(){if(n.readyState==n.DONE&&200==n.status){var e,t=$.parseJSON(n.response).status;$.parseJSON(n.response).message,203==t?(r.hide(),function(){var e=60;s.attr("disabled","disabled"),s.addClass("disabled");var t=setInterval(function(){e-=1,s.html("重新发送 ("+e+")"),0==e&&(clearInterval(t),s.html("发送验证码"),s.removeAttr("disabled"),s.removeClass("disabled"))},1e3)}()):(200==t?e=$('input[name="forget-psw-200"]').val():202==t&&(e=$('input[name="forget-psw-202"]').val()),r.html(e),r.show())}}}else r.html($('input[name="forget-psw-201"]').val()),r.show()}),a.on("click touch",function(){o.validate({rules:{uid:"required",secureCode:"required",newPsw:{required:!0,minlength:6,maxlength:18},repeatPsw:{equalTo:"#newPsw"}},messages:{uid:$('input[name="forget-psw-201"]').val(),secureCode:$('input[name="forget-psw-210"]').val(),newPsw:{required:$('input[name="forget-psw-220"]').val(),minlength:$('input[name="forget-psw-222"]').val()},repeatPsw:{equalTo:$('input[name="forget-psw-221"]').val()}},submitHandler:function(){!function(){o.serializeJson();var e="http://mib.zengpan.org:8000/forget-psw?",t=o.serializeJson();console.log(t),t._response={status:100,message:"修改成功"},t=JSON.stringify(t),e+=t,console.log(t);var i=new XMLHttpRequest;i.open("GET",encodeURI(e),!0),i.onerror=i.onabort=i.ontimeout=function(e){console.log(e)},i.send(),i.onreadystatechange=function(){if(console.log("run onreadystatechange"),i.readyState==i.DONE&&200==i.status){var e,t=$.parseJSON(i.response).status;$.parseJSON(i.response).message,100==t?(r.hide(),c.show(),$(".js-popup-cover").show()):(211==t?e=$('input[name="forget-psw-211"]').val():200==t&&(e=$('input[name="forget-psw-200"]').val()),r.html(e),r.show())}}}()}})}),i=!1,n.find("input").on("keydown",function(){for(var e=n.find("input").length,t=0;t<e;t++){if(""==$(n.find("input")[t]).val()){i=!1;break}i=!0}i&&a.removeAttr("disabled")})},$.fn.GroupMembers=function(e){$(this);var t,i=$(this).find(".js-title"),n=$(this).find(".js-list");t=n.find("li").length-1,i.html(i.html()+"("+t+")")},$.fn.GroupOwner=function(e){$(this);var t=$(this).find(".js-submit"),i=$(this).find(".js-checkbox");i.on("click touch",function(){i.each(function(){$(this).removeClass("active"),$(this).find("input").val("")}),$(this).toggleClass("active"),$(this).find("input").val("selected")}),t.on("click touch",function(){})},$.fn.Home=function(e){$(this).find(".js-categories-slider").slick({dots:!1,infinite:!1,slidesToShow:4,arrows:!1})},$.fn.MobileVerification=function(){var s=$(this).find(".js-mobile-number"),a=$(".js-popup-code"),o=a.find(".js-popup-code-form"),e=a.find(".js-popup-code-submit"),r=a.find(".js-error");e.on("click touch",function(){var e="";a.find('input[name="phone"]').val(s.val()),a.find("input.js-code").each(function(){e+=$(this).val().toString()}),a.find('input[name="code"]').val(e),o.serializeJson();var t="http://mib.zengpan.org:8000/register?",i=o.serializeJson();i._response={status:100,message:"success"},i=JSON.stringify(i),t+=i;var n=new XMLHttpRequest;n.open("GET",encodeURI(t),!0),n.onerror=n.onabort=n.ontimeout=function(e){console.log(e)},n.send(),n.onreadystatechange=function(){if(n.readyState==n.DONE&&200==n.status){var e,t=$.parseJSON(n.response).status;$.parseJSON(n.response).message,100==t?(r.hide(),window.location.href="./index.html"):(200==t?e=$('input[name="mobile-signin-200"]').val():201==t?e=$('input[name="mobile-signin-201"]').val():210==t&&(e=$('input[name="mobile-signin-210"]').val()),r.html(e),r.show())}}})},$.fn.MoreMenu=function(e){var t=$(this),i=$(this).find(".js-open-menu"),n=$(this).find(".js-menu-dropdown");i.on("click touch",function(e){e.stopPropagation(),e.preventDefault(),t.toggleClass("active"),n.slideToggle()})},$.fn.OrderDetail=function(e){var t=$(this).find(".js-order-detail-checkbox"),i=$(this).find(".js-user-info p"),n=$(this).find('.js-user-info input[name="userName"]'),s=$(this).find('.js-user-info input[name="userId"]'),a=$(this).find(".js-user-info .js-btn");function o(){var e=n.val()+" "+s.val();i.html(e)}t.on("click touch",function(){var e=""==$(this).attr("data-value")?"checked":"";$(this).toggleClass("active"),$(this).attr("data-value",e),$(this).next().val(e)}),a.html(),o(),a.on("click touch",function(){n.toggle(),s.toggle(),i.toggle(),o()}),0<$(".js-datepicker").length&&$(".js-datepicker").dateRangePicker({language:"cn"})},$.fn.PaymentMethod=function(e){$(this);var t=$(this).find(".js-checkbox");t.each(function(){$(this).on("click touch",function(){t.each(function(){$(this).attr("data-checked","").removeClass("active"),$(this).prev().val("")}),$(this).addClass("active"),$(this).attr("data-checked","checked"),$(this).prev().val("checked")})})},$.fn.Popups=function(e){$(this);function t(e){(e=e).hide(),$(".js-popup-cover").hide()}$(document).on("click touch",".js-popup-cover, .js-close-popup-code",function(e){e.stopPropagation(),t($(".js-popup-code"))}),$(".js-popup-code-verification-btn").on("click touch",function(){var e=60,t=this;$(this).attr("disabled","disabled");var i=setInterval(function(){e-=1,$(t).html("重新发送 ("+e+")"),0==e&&(clearInterval(i),$(t).html("发送验证码"),$(t).removeAttr("disabled"))},1e3)}),$(".js-popup-code").find("input.js-code").each(function(e){var t=e;$(this).on("keydown",function(){1==$(this).val().length&&0<$($(".js-popup-code").find("input.js-code")[t+1]).length&&$($(".js-popup-code").find("input")[t+1]).focus()}),$(this).on("input.js-code",function(){!function(){for(var e=$(".js-popup-code").find("input.js-code").length,t=0;t<e&&0!=$($(".js-popup-code").find("input.js-code")[t]).val().length;t++)t==e-1&&$(".js-popup-code").find(".js-btn").removeClass("disabled")}()})}),$(document).on("click touch",".js-popup-cover, .js-close-register",function(e){e.stopPropagation(),t($(".js-popup-register"))}),$(document).on("click touch",".js-popup-cover",function(e){e.stopPropagation(),t($(".js-popup-reset-psw"))})},$.fn.PrePay=function(e){$(this);var t,i=$(this).find(".js-checkbox"),n=$(this).find(".js-price"),s=$(this).find(".js-total"),a="¥";i.on("click touch",function(){var e=""==$(this).attr("data-checked")?"checked":"";$(this).toggleClass("active"),$(this).attr("data-checked",e),$(this).prev().val(e)}),t=0,n.each(function(){var e=parseInt($(this).attr("data-price"));t+=e}),t=Number(t).toFixed(2),s.attr("data-price",t).html(a+t)},$.fn.ProductInfo=function(e){var a=$(this),o=a.find(".js-media").html(),r=6;!function s(){a.find('.js-media input[type="file"]').removeAttr("capture"),a.find('.js-media input[type="file"]').on("change",function(){var e=this.files[0],t=this,i=new FileReader,n=$(this).parent().hasClass("uploaded");i.readAsDataURL(e),i.onload=function(){n||a.find('.js-media input[type="file"]').length<r&&(a.find(".js-media").append(o),s()),$(t).parent().addClass("uploaded"),$(t).parent().find(".media-img").remove(),$(t).parent().append('<img class="media-img" src="'+this.result+'" alt="" />')}})}()},$.fn.ProjectList=function(e){var t=$(this).find(".js-categories-slider"),i=$(this).find(".js-favorite");t.slick({dots:!1,infinite:!1,slidesToShow:3,arrows:!1}),i.each(function(){$(this).on("click touch",function(e){e.preventDefault(),e.stopPropagation(),$(this).toggleClass("active")})})},$.fn.Publish=function(e){var o=$(this),t=o.find(".js-checkbox"),i=o.find(".js-project-experience"),r=o.find(".js-type"),c=o.find(".js-selected-type"),d=o.find('input[name="type"]');function l(e,t,i,n,s){var a=e,o=t,r=$('input[name="url"]').val();n&&s?r=r+"?t2="+a+"&val="+o+"&show="+i+"&option1="+(n=n)+"&option2="+(s=s):r=r+"?t2="+a+"&val="+o+"&show="+i;window.location.href=r}!function(){0<t.length&&t.each(function(){$(this).on("click touch",function(){t.each(function(){$(this).removeClass("active"),$(this).attr("data-checked",""),$(this).next().val("")}),$(this).addClass("active"),$(this).attr("data-checked","checked"),$(this).next().val("checked")})});(function(){var e=location.href,t=[],i=!1,n=!1;if(0<=e.indexOf("?")&&e.indexOf("t2")){for(var s=location.search.replace("?","").split("&"),a=0;a<s.length;a++)t.push(s[a].split("="));c.html(decodeURIComponent(t[1][1])),d.val(t[0][1]),c.removeClass("hide"),4<=t.length&&(i=t[3][1]),5==t.length&&(n=t[4][1]),function(e,t,i){if(console.log("option1: "+t),console.log(i),"1"==(e=e))$(".js-show-game").removeClass("hide");else{if($(".js-show-other").removeClass("hide"),t)switch(t){case"input":$(".js-option1-input").removeClass("hide");break;case"select":$(".js-option1-select").removeClass("hide")}if(i)switch(i){case"input":$(".js-option2-input").removeClass("hide");break;case"select":$(".js-option2-select").removeClass("hide")}}$(".js-next").removeClass("hide")}(t[2][1],i,n)}})(),0<i.length&&(e=i.html(),o.find(".js-add").on("click touch",function(){i.append(e)}));var e;0<r.length&&(r.find(".js-type-heading").on("click touch",function(){var e=$(this).attr("data-category"),t=$(this).html(),i=$(this).attr("data-show");0<$('[data-type-category="'+e+'"]').length?$('[data-type-category="'+e+'"]').stop().slideToggle():(r.removeClass("selected"),o.find(".js-type-option").removeClass("selected"),$(this).parent().addClass("selected"),l(e,t,i))}),r.find(".js-type-option").on("click touch",function(e){var t=$(this).attr("data-type-option"),i=$(this).attr("data-option1"),n=$(this).attr("data-option2"),s=$(this).find("span").html(),a=$(this).attr("data-show");r.removeClass("selected"),o.find(".js-type-option").removeClass("selected"),$(this).addClass("selected"),$(this).parents(".js-type").addClass("selected"),l(t,s,a,i,n)}))}()},$.fn.RadioBox=function(e){var t=$(this).find(".js-checkbox");t.on("click touch",function(){t.each(function(){$(this).removeClass("active"),$(this).find("input").val("")}),$(this).toggleClass("active"),$(this).find("input").val("selected")})},$.fn.Register=function(e){$(this);var i,t=$(this).find(".js-checkbox"),n=$(this).find(".js-register-form"),s=$(this).find(".js-register-btn"),o=$(this).find(".js-error"),r=$(".js-popup-verify-email"),c=r.find(".js-verify-btn"),d=r.find(".js-resend-btn"),l=r,h=r.find(".js-error"),u=$(".js-popup-code"),f=u.find(".js-popup-code-form"),p=u.find(".js-popup-code-submit"),v=u.find(".js-error"),a=$(".js-popup-register");function m(){var e=60;d.attr("disabled","disabled");var t=setInterval(function(){e-=1,d.html("重新发送 ("+e+")"),0==e&&(clearInterval(t),d.html("发送验证码"),d.removeAttr("disabled"))},1e3)}function g(e){(e=e).show(),$(".js-popup-cover").show()}function j(e){(e=e).hide(),$(".js-popup-cover").hide()}function w(){j(r),j(u),g(a),a.find("a").on("click touch",function(){window.location.href="./index.html"}),setTimeout(function(){window.location.href="./index.html"},5e3)}t.on("click touch",function(){var e=$(this).hasClass("checked")?"false":"true";$(this).toggleClass("checked"),$(this).find("input").val(e)}),i=!1,n.find("input").on("keydown",function(){for(var e=n.find("input").length,t=0;t<e;t++){if(""==$(n.find("input")[t]).val()){i=!1;break}i=!0}i&&s.removeAttr("disabled")}),s.on("click touch",function(e){n.validate({rules:{name:"required",email_mobile:"required",pwd:{required:!0,minlength:6}},messages:{user:$('input[name="register-230"]').val(),email_mobile:$('input[name="register-210"]').val(),pwd:{required:$('input[name="register-220"]').val(),minlength:$('input[name="register-221"]').val()}},submitHandler:function(e){var t=n.find('input[name="email_mobile"]').val();s.attr("disabled"),$(".js-loading").show(),function(s){var s=s,e=(n.serializeJson(),"http://mib.zengpan.org:8000/register?"),t=n.serializeJson();t._response={status:213,message:"手机号不可用"},t=JSON.stringify(t),e+=t;var a=new XMLHttpRequest;a.open("GET",encodeURI(e),!0),a.onerror=a.onabort=a.ontimeout=function(e){console.log(e)},a.send(),a.onreadystatechange=function(){if(a.readyState==a.DONE&&($(".js-loading").hide(),200==a.status)){var e=$.parseJSON(a.response).status,t=$.parseJSON(a.response).message;100==e?(o.hide(),0<s.indexOf("@")?(n=n=s,r.find(".js-display-email").html(n),r.find('input[name="userEmail"]').val(n),g(r),m(),d.on("click touch",function(e){e.preventDefault(),m()}),c.on("click touch",function(e){e.preventDefault(),l.serializeJson();var t=l.serializeJson(),i="http://mib.zengpan.org:8000/register?";t._response={status:100,message:"验证成功"},t=JSON.stringify(t),i+=t;var n=new XMLHttpRequest;n.open("GET",encodeURI(i),!0),n.onerror=n.onabort=n.ontimeout=function(e){console.log(e)},n.send(),n.onreadystatechange=function(){if(n.readyState==n.DONE&&200==n.status){var e,t=$.parseJSON(n.response).status;$.parseJSON(n.response).message,100==t?(h.hide(),w()):(200==t&&(e=$('input[name="register-email-200"]').val()),h.html(e),h.show())}}}),$(document).on("click touch",".js-popup-cover, .js-close-verify-email",function(e){e.stopPropagation(),j(r)})):(i=i=s,u.find('input[name="phone"]').val(i),g(u),p.on("click touch",function(){var e="";u.find("input.js-code").each(function(){e+=$(this).val().toString()}),u.find('input[name="code"]').val(e),f.serializeJson();var t="http://mib.zengpan.org:8000/register?",i=f.serializeJson();i._response={status:100,message:"验证成功"},i=JSON.stringify(i),t+=i;var n=new XMLHttpRequest;n.open("GET",encodeURI(t),!0),n.onerror=n.onabort=n.ontimeout=function(e){console.log(e)},n.send(),n.onreadystatechange=function(){if(n.readyState==n.DONE&&200==n.status){var e,t=$.parseJSON(n.response).status;$.parseJSON(n.response).message,100==t?(v.hide(),w()):(200==t&&(e=$('input[name="register-mobile-200"]').val()),v.html(e),v.show())}}}))):(210==e?$('input[name="register-210"]').val():211==e?$('input[name="register-211"]').val():212==e?$('input[name="register-212"]').val():213==e?$('input[name="register-213"]').val():214==e?$('input[name="register-214"]').val():215==e?$('input[name="register-215"]').val():220==e?$('input[name="register-220"]').val():221==e?$('input[name="register-221"]').val():222==e?$('input[name="register-222"]').val():223==e?$('input[name="register-223"]').val():230==e?$('input[name="register-230"]').val():231==e?$('input[name="register-231"]').val():232==e?$('input[name="register-232"]').val():233==e&&$('input[name="register-233"]').val(),o.html(t),o.show())}var i,n}}(t)}})})},$.fn.Scan=function(e){var n;$(this);n=null,window.addEventListener("DOMContentLoaded",function(){try{document.getElementById("canvas").getContext("2d"),n=document.getElementById("video");var e={video:!0,audio:!1},t=!0,i=function(e){t=!1,e.PERMISSION_DENIED?alert("用户拒绝了浏览器请求媒体的权限","提示"):e.NOT_SUPPORTED_ERROR?alert("对不起，您的浏览器不支持拍照功能，请使用其他浏览器","提示"):e.MANDATORY_UNSATISFIED_ERROR?alert("指定的媒体类型未接收到媒体流","提示"):alert("系统未能获取到摄像头，请确保摄像头已正确安装。或尝试刷新页面，重试","提示")};if(navigator.getUserMedia){if(-1<navigator.userAgent.indexOf("MQQBrowser"))return alert("对不起，您的浏览器不支持拍照功能，请使用其他浏览器","提示"),!1;navigator.getUserMedia(e,function(e){n.src=e,n.play()},i)}else if(navigator.webkitGetUserMedia)navigator.webkitGetUserMedia(e,function(e){n.src=window.webkitURL.createObjectURL(e),n.play()},i);else if(navigator.mozGetUserMedia)navigator.mozGetUserMedia(e,function(e){n.src=window.URL.createObjectURL(e),n.play()},i);else{if(!navigator.msGetUserMedia)return alert("对不起，您的浏览器不支持拍照功能，请使用其他浏览器"),!1;navigator.msGetUserMedia(e,function(e){$(document).scrollTop($(window).height()),n.src=window.URL.createObjectURL(e),n.play()},i)}t&&alert("为了获得更准确的测试结果，请尽量将二维码置于框中，然后进行拍摄、扫描。 请确保浏览器有权限使用摄像功能")}catch(e){printHtml("浏览器不支持HTML5 CANVAS")}},!1)},$.fn.Search=function(e){var t,i,n,s,a=$(this).find(".js-clear-btn"),o=$(this).find(".js-result-container"),r=$(this).find(".js-history-view-more");a.on("click touch",function(e){o.html(""),r.addClass("hide"),$(".js-history-view-more").attr("data-expanded","false").html("更多")}),156<(s=$(".js-history-list").height())&&(i="更多",$(".js-history-view-more").html(i),$(".js-history-view-more").removeClass("hide"),t=s),$(".js-history-view-more").on("click",function(){n="true"==$(this).attr("data-expanded")?"false":"true",$(".js-history-box").animate({height:t+"px"}),$(this).attr("data-expanded",n),t=156==t?s:156,i="更多"==i?"收起":"更多",$(".js-history-view-more").html(i)})},$.fn.SelectAndCount=function(e){var t=$(this),i=t.find(".js-complete"),n=t.find(".js-selection"),s=i.html();n.on("click touch",function(){var e;$(this).toggleClass("active"),0!==(e=t.find(".js-selection.active").length)?i.html(s+"("+e+")"):i.html(s)})},$.fn.SelectFriends=function(e){var n=$(this),s=$(this).find(".js-submit"),a=$(this).find(".js-checkbox"),o=$(this).find(".js-select-group");a.on("click touch",function(){var e,t,i;$(this).toggleClass("active"),e=$(this).hasClass("active")?"selected":"",$(this).find("input").val(e),t=0,a.each(function(){$(this).hasClass("active")&&(t+=1)}),s.html("完成 ("+t+")"),i="",a.each(function(){if($(this).hasClass("active")){var e=$(this).attr("data-img"),t=$(this).attr("data-name");i+='<li class="txt--c"><img class="l-w--100p has-corner--50p" src="'+e+'" alt="'+t+'"/></li>',n.find(".js-select-group ul").html(i)}}),0<n.find(".js-checkbox.active").length?o.show():(n.find(".js-select-group ul").html(""),o.hide())}),s.on("click touch",function(){})},$.fn.SelectLocation=function(e){var t=$(this),i=t.find(".js-complete"),n=t.find(".js-selection"),s=t.find(".js-selected");i.html();n.on("click touch",function(){var e=$(this).find(".c-location--item--name").html();n.removeClass("active"),$(this).toggleClass("active"),s.find(".c-location--item--name").html(e),s.removeClass("hide")})},$.fn.Selected=function(e){var t=$(this).find(".js-categories-slider"),i=$(this).find(".js-favorite");t.slick({dots:!1,infinite:!1,slidesToShow:5,arrows:!1}),i.each(function(){$(this).on("click touch",function(e){e.preventDefault(),e.stopPropagation(),$(this).toggleClass("active")})})},$.fn.serializeJson=function(){var e={},t=this.serializeArray();return $(t).each(function(){e[this.name]?$.isArray(e[this.name])?e[this.name].push(this.value):e[this.name]=[e[this.name],this.value]:e[this.name]=this.value}),e},$.fn.SettingUser=function(e){var t=$(this),i=t.find(".js-input-file"),n=t.find(".js-birthday"),s=t.find(".js-astro");i.removeAttr("capture"),n.on("change",function(){var e,t=new Date($(this).val().replace("-","/")),i=t.getMonth()+1,n=t.getDate();s.html("摩羯座水瓶座双鱼座白羊座金牛座双子座巨蟹座狮子座处女座天秤座天蝎座射手座魔羯座".substr(3*(e=i)-(n<[20,19,21,21,21,22,23,23,23,23,22,22][e]?3:0),3))})},$.fn.SignInByMobile=function(e){var t=$(this).find(".js-open-popup-code"),i=$(this).find(".js-form");i.find(".js-error");t.on("click touch",function(){i.validate({rules:{uid:"required"},messages:{uid:$('input[name="mobile-signin-201"]').val()},submitHandler:function(e){$(".js-popup-code").show(),$(".js-popup-cover").show()}})})},$.fn.SignIn=function(e){$(this);var n=$(this).find(".js-sign-in-form"),t=$(this).find(".js-dropdown-body"),i=$(this).find(".js-dropdown-body .js-remove"),s=$(this).find(".js-dropdown-btn"),a=$(this).find(".js-sign-in-submit"),o=n.find(".js-error");s.on("click touch",function(){0==!t.find("li").length&&t.slideToggle()}),$(document).on("click touch",function(e){e.stopPropagation(),$(e.target).parents(".c-sign-in--form").length<=0&&t.slideUp()}),i.each(function(){$(this).on("click touch",function(e){$(this).parents("li").remove(),0==t.find("li").length&&t.slideToggle()})}),t.find("span").on("click touch",function(){var e=$(this).html();t.siblings("input").val(e)}),a.on("click touch",function(e){n.validate({rules:{user:"required",pwd:"required"},messages:{user:$('input[name="signin-200"]').val(),pwd:$('input[name="signin-202"]').val()},submitHandler:function(){!function(){n.serializeJson();var e="http://mib.zengpan.org:8000/signin?",t=n.serializeJson();t._response={status:100,message:"登陆成功"},t=JSON.stringify(t),e+=t;var i=new XMLHttpRequest;i.open("GET",encodeURI(e),!0),i.onerror=i.onabort=i.ontimeout=function(e){console.log(e)},i.send(),i.onreadystatechange=function(){if(i.readyState==i.DONE&&200==i.status){var e,t=$.parseJSON(i.response).status;$.parseJSON(i.response).message,100==t?(o.hide(),window.location.href="./index.html"):(200==t?e=$('input[name="signin-200"]').val():201==t?e=$('input[name="signin-201"]').val():202==t&&(e=$('input[name="signin-202"]').val()),o.html(e),o.show())}}}()}})})},$.fn.StoreComments=function(e){$(this).find(".js-comments-body")},$.fn.SwitchControl=function(e){$(this);$(this).find(".js-checkbox").on("click touch",function(e){$(this).toggleClass("checked")})},$.fn.TabPanel=function(e){var i=$(this),n=$(this).find(".js-tab-menu"),s=$(this).find(".js-tab-panel");n.on("click touch",function(e){e.stopPropagation();var t=$(this).attr("data-tab-index");n.removeClass("active"),s.removeClass("active"),$(this).addClass("active"),i.find(".js-tab-panel[data-panel-index="+t+"]").addClass("active")})},$.fn.TogglePsw=function(e){var t=$(this).find(".js-psw-input"),i=$(this).find(".js-psw-eye");i.on("click touch",function(){var e="password"==t.attr("type")?"text":"password";i.toggleClass("close"),t.attr("type",e)})};