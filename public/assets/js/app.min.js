"use strict";$.fn.Calender=function(t){var s=$(this).find(".js-calendar-container");!function(){for(var t=0;t<12;t++){var i=new Date,e=".js-calendar-"+(t+1);i.setDate(1),i.setMonth(i.getMonth()-6+t),s.append('<div class="c-calendar--block js-calendar js-calendar-'+(t+1)+'" data-time="'+i+'"></div>'),$(e).calendar({date:i,daysMin:["日","一","二","三","四","五","六"]})}s.append('<input type="hidden" name="selectDate" class="js-calendar-select-date">')}()},$.fn.Carousel=function(t){$(this).slick({infinite:!0,arrows:!1,dots:!1})},$.fn.Collapse=function(t){var n,a,o=$.extend({text:!1},t),c=$(this).find(".js-collapse-container"),i=$(this).find(".js-collapse-content"),r=$(this).find(".js-collapse-btn");o.text&&(n="阅读更多",a="收起");var d=c.height();!function(){var e,s=i.height();d<s&&(r.attr("data-expanded",!1).removeClass("hide"),o.text&&r.find("span").html(n),e=s);r.on("click",function(){var t="true"==$(this).attr("data-expanded")?"false":"true";if(c.animate({height:e+"px"}),r.attr("data-expanded",t),e=e==d?s:d,o.text){var i=$(this).find("span").html()==n?a:n;r.find("span").html(i)}})}()},$(document).ready(function(){$(document).Popups(),$("[data-js-sign-in]").SignIn(),$("[data-js-register]").Register(),$("[data-js-order-detail]").OrderDetail(),$("[data-js-prepay]").PrePay(),$("[data-js-payment-method]").PaymentMethod(),$("[data-js-home]").Home(),$("[data-js-project-list]").ProjectList(),$("[data-js-carousel]").Carousel(),$("[data-js-store-comments]").StoreComments(),$("[data-js-password]").TogglePsw(),$("[data-js-calendar]").Calender(),$("[data-js-forget-psw]").forgetPsw(),$("[data-js-reset-psw]").resetPsw(),$("[data-js-collapse]").Collapse({text:!0}),$("[data-js-search]").Search(),lightbox.option({resizeDuration:200,wrapAround:!0})}),$.fn.forgetPsw=function(t){$(this);var i=$(this).find(".js-code"),e=$(this).find(".js-submit"),s=$(this).find(".js-forget-psw-form");i.on("click touch",function(){if(!$(this).hasClass("disabled")){var t=60,i=this;$(this).addClass("disabled");var e=setInterval(function(){t-=1,$(i).html("重新发送 ("+t+")"),0==t&&(clearInterval(e),$(i).html("发送验证码"),$(i).removeClass("disabled"))},1e3)}}),e.on("click touch",function(){var t=s.serialize();$.ajax({type:"POST",dataType:"text",url:"",data:t,success:function(t){}})})},$.fn.Home=function(t){$(this).find(".js-categories-slider").slick({dots:!1,infinite:!1,slidesToShow:4,arrows:!1})},$.fn.OrderDetail=function(t){var i=$(this).find(".js-order-detail-checkbox"),e=$(this).find(".js-user-info p"),s=$(this).find('.js-user-info input[name="userName"]'),n=$(this).find('.js-user-info input[name="userId"]'),a=$(this).find(".js-user-info .js-btn");function o(){var t=s.val()+" "+n.val();e.html(t)}i.on("click touch",function(){var t=""==$(this).attr("data-value")?"checked":"";$(this).toggleClass("active"),$(this).attr("data-value",t),$(this).next().val(t)}),a.html(),o(),a.on("click touch",function(){s.toggle(),n.toggle(),e.toggle(),o()}),0<$(".js-datepicker").length&&$(".js-datepicker").dateRangePicker({language:"cn"})},$.fn.PaymentMethod=function(t){$(this);var i=$(this).find(".js-checkbox");i.each(function(){$(this).on("click touch",function(){i.each(function(){$(this).attr("data-checked","").removeClass("active"),$(this).prev().val("")}),$(this).addClass("active"),$(this).attr("data-checked","checked"),$(this).prev().val("checked")})})},$.fn.Popups=function(t){$(this);function i(t){(t=t).hide(),$(".js-popup-cover").hide()}$(document).on("click touch",".js-open-popup-code",function(t){t.stopPropagation(),$(".js-popup-code").show(),$(".js-popup-cover").show()}),$(document).on("click touch",".js-popup-cover, .js-close-popup-code",function(t){t.stopPropagation(),i($(".js-popup-code"))}),$(".js-popup-code-verification-btn").on("click touch",function(){if(!$(this).hasClass("disabled")){var t=60,i=this;$(this).addClass("disabled");var e=setInterval(function(){t-=1,$(i).html("重新发送 ("+t+")"),0==t&&(clearInterval(e),$(i).html("发送验证码"),$(i).removeClass("disabled"))},1e3)}}),$(".js-popup-code").find("input").each(function(t){var i=t;$(this).on("keydown",function(){1==$(this).val().length&&0<$($(".js-popup-code").find("input")[i+1]).length&&$($(".js-popup-code").find("input")[i+1]).focus()}),$(this).on("input",function(){!function(){for(var t=$(".js-popup-code").find("input").length,i=0;i<t&&0!=$($(".js-popup-code").find("input")[i]).val().length;i++)i==t-1&&($(".js-popup-code").find(".js-btn").removeClass("disabled"),$(".js-popup-code-submit").on("click touch",function(){if(!$(this).hasClass("disabled")){var t="";$(".js-popup-code-inputs input").each(function(){t+=$(this).val()}),$.ajax({type:"POST",dataType:"text",url:"",data:t,success:function(t){}})}}))}()})}),$(document).on("click touch",".js-popup-cover, .js-close-register",function(t){t.stopPropagation(),i($(".js-popup-register"))}),$(document).on("click touch",".js-popup-cover",function(t){t.stopPropagation(),i($(".js-popup-reset-psw"))})},$.fn.PrePay=function(t){$(this);var i,e=$(this).find(".js-checkbox"),s=$(this).find(".js-price"),n=$(this).find(".js-total"),a="¥";e.on("click touch",function(){var t=""==$(this).attr("data-checked")?"checked":"";$(this).toggleClass("active"),$(this).attr("data-checked",t),$(this).prev().val(t)}),i=0,s.each(function(){var t=parseInt($(this).attr("data-price"));i+=t}),i=Number(i).toFixed(2),n.attr("data-price",i).html(a+i)},$.fn.ProjectList=function(t){var i=$(this).find(".js-categories-slider"),e=$(this).find(".js-favorite");i.slick({dots:!1,infinite:!1,slidesToShow:3,arrows:!1}),e.each(function(){$(this).on("click touch",function(t){t.preventDefault(),t.stopPropagation(),$(this).toggleClass("active")})})},$.fn.Register=function(t){$(this);var e,s=$(this).find(".js-checkbox"),n=$(this).find(".js-register-form"),a=$(this).find(".js-register-btn"),o=$(".js-popup-verify-email"),i=o.find(".js-verify-btn"),c=o.find(".js-resend-btn"),r=($(".js-popup-code"),$(".js-popup-register"));function d(){l(o),$(document).on("click touch",".js-popup-cover, .js-close-verify-email",function(t){t.stopPropagation(),h(o)})}function l(t){(t=t).show(),$(".js-popup-cover").show(),u(),c.on("click touch",function(t){t.preventDefault(),$(this).hasClass("disabled")||u()}),i.on("click touch",function(t){t.preventDefault(),p();var i=o.serialize();i=i+"&"+s.find("input").attr("name")+"="+s.find("input").val(),$.ajax({type:"POST",dataType:"text",url:"",data:i,success:function(t){p()}})})}function h(t){(t=t).hide(),$(".js-popup-cover").hide()}function u(){var t=60;c.addClass("disabled");var i=setInterval(function(){t-=1,c.html("重新发送 ("+t+")"),0==t&&(clearInterval(i),c.html("发送验证码"),c.removeClass("disabled"))},1e3)}function p(){h(o),l(r)}s.on("click touch",function(){var t=$(this).hasClass("checked")?"true":"false";$(this).toggleClass("checked"),$(this).find("input").val(t)}),e=!1,n.find("input").on("keydown",function(){for(var t=n.find("input").length,i=0;i<t;i++){if(""==$(n.find("input")[i]).val()){e=!1;break}e=!0}e&&a.removeClass("disabled")}),a.on("click touch",function(t){if(t.stopPropagation(),!$(this).hasClass("disabled")){d();var i=n.serialize();$.ajax({type:"POST",dataType:"text",url:"",data:i,success:function(t){d()}})}})},$.fn.resetPsw=function(t){$(this);var i=$(this).find(".js-submit"),n=$(this).find(".js-reset-psw-form"),a=$(this).find(".js-input-psw1"),o=$(this).find(".js-input-psw2"),c=$(this).find(".js-warning");i.on("click",function(t){t.preventDefault();var i=a.val(),e=o.val();if(""==i||""==e)c.html("请输入密码"),c.show();else if(i!==e)c.html("密码不匹配"),c.show();else{c.hide();var s=n.serialize();console.log(s),$.ajax({type:"POST",dataType:"text",url:"",data:s,success:function(t){}})}})},$.fn.Search=function(t){var i,e,s,n,a=$(this).find(".js-clear-btn"),o=$(this).find(".js-result-container"),c=$(this).find(".js-history-view-more");a.on("click touch",function(t){o.html(""),c.addClass("hide"),$(".js-history-view-more").attr("data-expanded","false").html("更多")}),156<(n=$(".js-history-list").height())&&(e="更多",$(".js-history-view-more").html(e),$(".js-history-view-more").removeClass("hide"),i=n),$(".js-history-view-more").on("click",function(){s="true"==$(this).attr("data-expanded")?"false":"true",$(".js-history-box").animate({height:i+"px"}),$(this).attr("data-expanded",s),i=156==i?n:156,e="更多"==e?"收起":"更多",$(".js-history-view-more").html(e)})},$.fn.serializeJson=function(){var t={},i=this.serializeArray();return $(i).each(function(){t[this.name]?$.isArray(t[this.name])?t[this.name].push(this.value):t[this.name]=[t[this.name],this.value]:t[this.name]=this.value}),t},$.fn.SignIn=function(t){$(this);var s=$(this).find(".js-sign-in-form"),i=$(this).find(".js-dropdown-body"),e=$(this).find(".js-dropdown-body .js-remove"),n=$(this).find(".js-dropdown-btn"),a=$(this).find(".js-sign-in-submit");n.on("click touch",function(){0==!i.find("li").length&&i.slideToggle()}),$(document).on("click touch",function(t){t.stopPropagation(),$(t.target).parents(".c-sign-in--form").length<=0&&i.slideUp()}),e.each(function(){$(this).on("click touch",function(t){$(this).parents("li").remove(),0==i.find("li").length&&i.slideToggle()})}),i.find("span").on("click touch",function(){var t=$(this).html();i.siblings("input").val(t)}),a.on("click touch",function(t){t.preventDefault();var i=s.serializeJson(),e="http://mib.zengpan.org:8000/register?";i._response=100,i=JSON.stringify(i),e+=i,$.ajax({type:"POST",dataType:"JSON",url:e,data:i,success:function(t){100==t?(console.log(t),window.location.href="./index.html"):console.log(t)},error:function(t){console.log(t)}})})},$.fn.StoreComments=function(t){$(this).find(".js-comments-body")},$.fn.TogglePsw=function(t){var i=$(this).find(".js-psw-input"),e=$(this).find(".js-psw-eye");e.on("click touch",function(){var t="password"==i.attr("type")?"text":"password";e.toggleClass("close"),i.attr("type",t)})};