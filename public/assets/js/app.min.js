"use strict";$.fn.Calender=function(t){var s=$(this).find(".js-calendar-container"),n=!0;!function(){for(var t=0;t<12;t++){var e=new Date,i=".js-calendar-"+(t+1);console.log(i),e.setDate(1),e.setMonth(e.getMonth()-6+t),s.append('<div class="c-calendar--block js-calendar js-calendar-'+(t+1)+'" data-time="'+e+'"></div>'),$(i).calendar({date:e,daysMin:["日","一","二","三","四","五","六"]})}s.append('<input type="hidden" name="selectDate" class="js-calendar-select-date">'),$(".js-calendar .day").on("click touch",function(){n||$(this).addClass("active")}),$(".js-calendar-select-date").val("a")}()},$.fn.Carousel=function(t){$(this).slick({infinite:!0,arrows:!1,dots:!1})},$.fn.Collapse=function(t){var n,a,o=$.extend({text:!1},t),c=$(this).find(".js-collapse-container"),e=$(this).find(".js-collapse-content"),d=$(this).find(".js-collapse-btn");o.text&&(n="阅读更多",a="收起");var r=c.height();!function(){var i,s=e.height();r<s&&(d.attr("data-expanded",!1).removeClass("hide"),o.text&&d.find("span").html(n),i=s);d.on("click",function(){var t="true"==$(this).attr("data-expanded")?"false":"true";if(c.animate({height:i+"px"}),d.attr("data-expanded",t),i=i==r?s:r,o.text){var e=$(this).find("span").html()==n?a:n;d.find("span").html(e)}})}()},$(document).ready(function(){$(document).Popups(),$("[data-js-register]").Register(),$("[data-js-order-detail]").OrderDetail(),$("[data-js-prepay]").PrePay(),$("[data-js-payment-method]").PaymentMethod(),$("[data-js-home]").Home(),$("[data-js-project-list]").ProjectList(),$("[data-js-carousel]").Carousel(),$("[data-js-store-comments]").StoreComments(),$("[data-js-password]").TogglePsw(),$("[data-js-calendar]").Calender(),$("[data-js-collapse]").Collapse({text:!0}),$("[data-js-search]").Search(),lightbox.option({resizeDuration:200,wrapAround:!0})}),$.fn.Home=function(t){$(this).find(".js-categories-slider").slick({dots:!1,infinite:!1,slidesToShow:4,arrows:!1})},$.fn.OrderDetail=function(t){var e=$(this).find(".js-order-detail-checkbox"),i=$(this).find(".js-user-info p"),s=$(this).find('.js-user-info input[name="userName"]'),n=$(this).find('.js-user-info input[name="userId"]'),a=$(this).find(".js-user-info .js-btn");function o(){var t=s.val()+" "+n.val();i.html(t)}e.on("click touch",function(){var t=""==$(this).attr("data-value")?"checked":"";$(this).toggleClass("active"),$(this).attr("data-value",t),$(this).next().val(t)}),a.html(),o(),a.on("click touch",function(){s.toggle(),n.toggle(),i.toggle(),o()}),0<$(".js-datepicker").length&&$(".js-datepicker").dateRangePicker({language:"cn"})},$.fn.PaymentMethod=function(t){$(this);var e=$(this).find(".js-checkbox");e.each(function(){$(this).on("click touch",function(){e.each(function(){$(this).attr("data-checked","").removeClass("active"),$(this).prev().val("")}),$(this).addClass("active"),$(this).attr("data-checked","checked"),$(this).prev().val("checked")})})},$.fn.Popups=function(t){$(this);function e(t){(t=t).show(),$(".js-popup-cover").show()}function i(t){(t=t).hide(),$(".js-popup-cover").hide()}$(document).on("click touch",".js-open-popup-code",function(t){t.stopPropagation(),e($(".js-popup-code"))}),$(document).on("click touch",".js-popup-cover, .js-close-popup-code",function(t){t.stopPropagation(),i($(".js-popup-code"))}),$(".js-popup-code").find("input").each(function(t){var e=t;$(this).on("keydown",function(){1==$(this).val().length&&0<$($(".js-popup-code").find("input")[e+1]).length&&$($(".js-popup-code").find("input")[e+1]).focus()}),$(this).on("input",function(){!function(){for(var t=$(".js-popup-code").find("input").length,e=0;e<t&&0!=$($(".js-popup-code").find("input")[e]).val().length;e++)e==t-1&&$(".js-popup-code").find(".js-btn").removeClass("disabled")}()})}),$(document).on("click touch",".js-popup-cover, .js-close-register",function(t){t.stopPropagation(),i($(".js-popup-register"))}),$(document).on("click touch",".js-register-btn",function(t){t.stopPropagation(),e($(".js-popup-verify-email"))}),$(document).on("click touch",".js-popup-cover, .js-close-verify-email",function(t){t.stopPropagation(),i($(".js-popup-verify-email"))}),$(document).on("click touch",".js-popup-cover",function(t){t.stopPropagation(),i($(".js-popup-reset-psw"))})},$.fn.PrePay=function(t){$(this);var e,i=$(this).find(".js-checkbox"),s=$(this).find(".js-price"),n=$(this).find(".js-total"),a="¥";i.on("click touch",function(){var t=""==$(this).attr("data-checked")?"checked":"";$(this).toggleClass("active"),$(this).attr("data-checked",t),$(this).prev().val(t)}),e=0,s.each(function(){var t=parseInt($(this).attr("data-price"));e+=t,console.log("itemprice: "+t+"; total: "+e)}),n.attr("data-price",e).html(a+e)},$.fn.ProjectList=function(t){$(this).find(".js-categories-slider").slick({dots:!1,infinite:!1,slidesToShow:3,arrows:!1})},$.fn.Register=function(t){$(this);$(this).find(".js-checkbox").on("click touch",function(){$(this).toggleClass("checked")})},$.fn.Search=function(t){var e,i,s,n,a=$(this).find(".js-clear-btn"),o=$(this).find(".js-result-container"),c=$(this).find(".js-history-view-more");a.on("click touch",function(t){o.html(""),c.addClass("hide"),$(".js-history-view-more").attr("data-expanded","false").html("更多")}),156<(n=$(".js-history-list").height())&&(i="更多",$(".js-history-view-more").html(i),$(".js-history-view-more").removeClass("hide"),e=n),$(".js-history-view-more").on("click",function(){s="true"==$(this).attr("data-expanded")?"false":"true",$(".js-history-box").animate({height:e+"px"}),$(this).attr("data-expanded",s),e=156==e?n:156,i="更多"==i?"收起":"更多",$(".js-history-view-more").html(i)})},$.fn.StoreComments=function(t){var s=$(this).find(".js-comments-body");s.each(function(){var t=$(this).children("p").height(),e=$(this).height(),i=e<t;i&&($(this).append('<div class="btn-expand js-view-more" data-expanded="false"><span>阅读更多</span></div>'),s.each(function(){var t=$(this),e=$(this).height(),i=$(this).find("p").height();$(this).find(".js-view-more").unbind("click touch").on("click touch",function(){"false"==$(this).attr("data-expanded")?(t.css("max-height",i),$(this).attr("data-expanded","true")):(t.css("max-height",e),$(this).attr("data-expanded","false"))})}))})},$.fn.TogglePsw=function(t){var e=$(this).find(".js-psw-input"),i=$(this).find(".js-psw-eye");i.on("click touch",function(){var t="password"==e.attr("type")?"text":"password";i.toggleClass("close"),e.attr("type",t)})};